(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a5de3ed6"],{"1bc7":function(t,e,n){"use strict";n("ed94")},2909:function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t){if(Array.isArray(t))return r(t)}n.d(e,"a",(function(){return o}));n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("a630");function i(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}n("fb6a");function c(t,e){if(t){if("string"===typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t){return a(t)||i(t)||c(t)||s()}},3597:function(t,e,n){},"42d1":function(t,e,n){},"4df4":function(t,e,n){"use strict";var r=n("0366"),a=n("7b0b"),i=n("9bdd"),c=n("e95a"),s=n("50c4"),o=n("8418"),u=n("35a1");t.exports=function(t){var e,n,l,f,d,p,h=a(t),v="function"==typeof this?this:Array,m=arguments.length,b=m>1?arguments[1]:void 0,g=void 0!==b,_=u(h),O=0;if(g&&(b=r(b,m>2?arguments[2]:void 0,2)),void 0==_||v==Array&&c(_))for(e=s(h.length),n=new v(e);e>O;O++)p=g?b(h[O],O):h[O],o(n,O,p);else for(f=_.call(h),d=f.next,n=new v;!(l=d.call(f)).done;O++)p=g?i(f,b,[l.value,O],!0):l.value,o(n,O,p);return n.length=O,n}},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,n){var r=n("1d80"),a=n("5899"),i="["+a+"]",c=RegExp("^"+i+i+"*"),s=RegExp(i+i+"*$"),o=function(t){return function(e){var n=String(r(e));return 1&t&&(n=n.replace(c,"")),2&t&&(n=n.replace(s,"")),n}};t.exports={start:o(1),end:o(2),trim:o(3)}},7156:function(t,e,n){var r=n("861d"),a=n("d2bb");t.exports=function(t,e,n){var i,c;return a&&"function"==typeof(i=e.constructor)&&i!==n&&r(c=i.prototype)&&c!==n.prototype&&a(t,c),t}},"7abe":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"topnav"},[n("van-nav-bar",[n("div",{attrs:{slot:"title"},slot:"title"},[n("van-button",{staticClass:"search-btn",attrs:{round:"",icon:"search",type:"default",size:"small",block:"",to:"/search"}},[t._v(" 搜索 ")])],1)])],1),n("van-tabs",{staticClass:"tabList",attrs:{color:"#3296fa",swipeable:"",duration:"0.5"},on:{change:t.torggleTab},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[t._l(t.userTabsList,(function(e){return n("van-tab",{key:e.id,attrs:{title:e.name}},[n("article-list",{ref:"refs_"+t.active,refInFor:!0,attrs:{articleId:e.id}})],1)})),n("div",{attrs:{slot:"nav-right"},slot:"nav-right"},[n("van-icon",{staticClass:"ham-icon",attrs:{name:"wap-nav"},on:{click:t.handleOpenChannel}})],1)],2),n("van-popup",{staticClass:"channel-edit-wrapper",style:{height:"100%"},attrs:{round:"",closeable:"","close-icon-position":"top-left",position:"bottom",overlay:!1,"get-container":"body"},model:{value:t.popUpShow,callback:function(e){t.popUpShow=e},expression:"popUpShow"}},[n("edit-channels",{attrs:{channelList:t.userTabsList,activeChannel:t.active},on:{addChannel:t.addUserChannel,deleteChannel:t.deleteUserChannel,closePopUp:function(e){t.popUpShow=!1},clickChannel:function(e){t.active=e},reduceActive:function(e){t.active--}}})],1)],1)},a=[],i=n("1da1"),c=n("5530"),s=(n("a434"),n("96cf"),n("fed0")),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"articleList",staticClass:"articleList"},[n("van-pull-refresh",{attrs:{"success-text":"刷新成功"},on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[n("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.articleList,(function(e){return n("article-item",{key:+e.art_id,attrs:{articleData:e},on:{clickDetail:function(n){return t.clickArticleDetail(e.art_id)}}})})),1)],1)],1)},u=[],l=n("2909"),f=n("ade3"),d=(n("a9e3"),n("8f3e")),p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("van-cell",{on:{click:function(e){return t.$emit("clickDetail")}}},[n("div",{attrs:{slot:"title"},slot:"title"},[n("div",{staticClass:"title"},[t._v(t._s(t.articleData.title))]),3==t.articleData.cover.type?n("div",t._l(t.articleData.cover.images,(function(t,e){return n("van-image",{key:e,staticClass:"image3",attrs:{fit:"cover",src:t}})})),1):t._e()]),n("div",{attrs:{slot:"label"},slot:"label"},[1==t.articleData.is_top?n("span",{staticClass:"isTop text"},[t._v("置顶")]):t._e(),n("span",{staticClass:"text"},[t._v(t._s(t.articleData.aut_name))]),n("span",{staticClass:"text"},[t._v(t._s(t.articleData.comm_count)+"评论")]),n("span",{staticClass:"text"},[t._v(t._s(t._f("currentDate")(t.articleData.pubdate)))])]),1==t.articleData.cover.type?n("div",{attrs:{slot:"default"},slot:"default"},[n("van-image",{attrs:{src:t.articleData.cover.images[0],fit:"cover"}})],1):t._e()])],1)},h=[],v={name:"ArticleItem",props:{articleData:{type:Object}}},m=v,b=(n("1bc7"),n("2877")),g=Object(b["a"])(m,p,h,!1,null,"584dcad6",null),_=g.exports,O=n("2ef0"),T={name:"articleList",data:function(){return{loading:!1,finished:!1,refreshing:!1,articleList:[],timestamp:null,scrollTop:0}},components:Object(f["a"])({},_.name,_),props:{articleId:{type:Number,required:!0}},methods:{getArticleList:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,r,a,i,c,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(d["h"])({channel_id:t.articleId,timestamp:t.timestamp?t.timestamp:+new Date,with_top:1});case 2:r=e.sent,a=r.data,i=a.data,c=i.results,s=i.pre_timestamp,(n=t.articleList).push.apply(n,Object(l["a"])(c)),t.loading=!1,c.length?t.timestamp=s:t.finished=!0;case 8:case"end":return e.stop()}}),e)})))()},onRefresh:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,r,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(d["h"])({channel_id:t.articleId,timestamp:+new Date,with_top:1});case 3:r=e.sent,a=r.data,i=a.data.results,(n=t.articleList).unshift.apply(n,Object(l["a"])(i)),t.$toast({message:"成功刷新".concat(i.length,"条数据"),type:"success"}),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),t.$toast({message:"刷新失败",type:"fail"});case 13:t.refreshing=!1;case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))()},onLoad:function(){this.getArticleList()},clickArticleDetail:function(t){this.$router.push({name:"articleDetail",params:{articleId:t+""}})},setScrollTop:function(){var t=this.$refs.articleList;t.scrollTop=this.scrollTop}},mounted:function(){var t=this,e=this.$refs.articleList;e.onscroll=Object(O["debounce"])((function(){t.scrollTop=e.scrollTop}),50)},activated:function(){this.setScrollTop()}},y=T,w=(n("f6c4"),Object(b["a"])(y,o,u,!1,null,"1d05ed46",null)),C=w.exports,j=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"edit-channels"},[n("div",{staticClass:"my-channels"},[n("p",{staticClass:"title"},[t._m(0),n("van-button",{attrs:{round:"",plain:"",color:"#f85959",size:"mini"},on:{click:function(e){t.isEditShow=!t.isEditShow}}},[t._v(" "+t._s(t.isEditShow?"完成":"编辑")+" ")])],1),n("van-grid",{attrs:{"column-num":4,gutter:11}},t._l(t.channelList,(function(e,r){return n("van-grid-item",{key:e.id,attrs:{icon:t.isEditShow&&0!==r?"close":""},on:{click:function(n){return t.hanldeChannel(r,e.id)}}},[n("div",{staticClass:"channelText",class:{channelStyle:t.activeChannel===r},attrs:{slot:"text"},slot:"text"},[t._v(" "+t._s(e.name)+" ")])])})),1)],1),n("div",{staticClass:"recommand-channels"},[t._m(1),n("van-grid",{attrs:{"column-num":4,gutter:11}},t._l(t.recommendChannels,(function(e){return n("van-grid-item",{key:e.id,attrs:{text:e.name},on:{click:function(n){return t.addChannel(e)}}})})),1)],1)])},x=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[t._v("我的频道 "),n("i",[t._v("点击进入频道")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",{staticClass:"title"},[n("span",[t._v("频道编辑 "),n("i",[t._v("点击添加频道")])])])}],E=(n("4de4"),n("7db0"),{name:"EditChannels",created:function(){this.getAllChannels()},data:function(){return{allChannels:[],isEditShow:!1}},computed:{recommendChannels:function(){var t=this;return this.allChannels.filter((function(e){return!t.channelList.find((function(t){return t.id===e.id}))}))}},props:{channelList:{type:Array},activeChannel:{type:Number}},methods:{getAllChannels:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(s["f"])();case 3:n=e.sent,r=n.data,console.log("所有频道列表",r),a=r.data.channels,t.allChannels=a,e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),t.$toast.fail("获取所有频道信息失败");case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))()},addChannel:function(t){console.log("添加的频道",t),this.$emit("addChannel",t)},hanldeChannel:function(t,e){this.isEditShow&&0!==t?(this.$emit("deleteChannel",t,e),t<=this.activeChannel&&this.$emit("reduceActive")):(this.$emit("closePopUp"),this.$emit("clickChannel",t))}}}),k=E,L=(n("8dfa"),Object(b["a"])(k,j,x,!1,null,"4ae90948",null)),A=L.exports,S=n("5d2d"),I=n("2f62"),$={name:"home",data:function(){return{userTabsList:[],popUpShow:!1,active:0}},computed:Object(c["a"])({},Object(I["b"])(["user"])),components:{ArticleList:C,EditChannels:A},methods:{getUserTabsList:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(s["h"])();case 3:n=e.sent,r=n.data,console.log("用户标签信息",r.data),t.userTabsList=r.data.channels,e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),t.$toast.fail("获取标签信息失败");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()},handleOpenChannel:function(){this.popUpShow=!0},addUserChannel:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(console.log("data",t),e.userTabsList.push(t),!e.user){n.next=13;break}return n.prev=3,n.next=6,Object(s["a"])({channels:[{id:t.id,seq:e.userTabsList.length}]});case 6:n.next=11;break;case 8:n.prev=8,n.t0=n["catch"](3),e.$toast.fail("添加失败");case 11:n.next=14;break;case 13:Object(S["b"])("userTabsList",e.userTabsList);case 14:case"end":return n.stop()}}),n,null,[[3,8]])})))()},deleteUserChannel:function(t,e){var n=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(console.log("delete",t,e),n.userTabsList.splice(t,1),!n.user){r.next=13;break}return r.prev=3,r.next=6,Object(s["c"])(e);case 6:r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](3),n.$toast.fail("删除频道失败");case 11:r.next=14;break;case 13:Object(S["b"])("userTabsList",n.userTabsList);case 14:case"end":return r.stop()}}),r,null,[[3,8]])})))()},torggleTab:function(){var t=this;this.$nextTick((function(){t.$refs["refs_"+t.active][t.active].setScrollTop()}))}},created:function(){console.log("首页tab"),this.user?this.getUserTabsList():Object(S["a"])("userTabsList")?this.userTabsList=Object(S["a"])("userTabsList"):this.getUserTabsList()},mounted:function(){this.$store.commit("removeHomeAcaheView","home")}},D=$,N=(n("b463"),Object(b["a"])(D,r,a,!1,null,"0236b8ee",null));e["default"]=N.exports},"7db0":function(t,e,n){"use strict";var r=n("23e7"),a=n("b727").find,i=n("44d2"),c="find",s=!0;c in[]&&Array(1)[c]((function(){s=!1})),r({target:"Array",proto:!0,forced:s},{find:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),i(c)},"8dfa":function(t,e,n){"use strict";n("f937")},"8f3e":function(t,e,n){"use strict";n.d(e,"h",(function(){return a})),n.d(e,"g",(function(){return i})),n.d(e,"a",(function(){return c})),n.d(e,"f",(function(){return s})),n.d(e,"e",(function(){return o})),n.d(e,"c",(function(){return u})),n.d(e,"i",(function(){return l})),n.d(e,"b",(function(){return f})),n.d(e,"d",(function(){return d})),n.d(e,"j",(function(){return p}));var r=n("b775"),a=function(t){return Object(r["a"])({method:"GET",url:"/app/v1_1/articles",params:t})},i=function(t){return Object(r["a"])({method:"GET",url:"/app/v1_0/articles/".concat(t)})},c=function(t){return Object(r["a"])({method:"POST",url:"/app/v1_0/article/likings",data:t})},s=function(t){return Object(r["a"])({method:"POST",url:"/app/v1_0/article/dislikes",data:t})},o=function(t){return Object(r["a"])({method:"POST",url:"/app/v1_0/article/collections",data:t})},u=function(t){return Object(r["a"])({method:"DELETE",url:"/app/v1_0/article/collections/".concat(t)})},l=function(t){return Object(r["a"])({method:"GET",url:"/app/v1_0/comments",params:t})},f=function(t){return Object(r["a"])({method:"POST",url:"/app/v1_0/comment/likings",data:t})},d=function(t){return Object(r["a"])({method:"DELETE",url:"/app/v1_0/comment/likings/".concat(t)})},p=function(t){return Object(r["a"])({method:"POST",url:"/app/v1_0/comments",data:t})}},"9bdd":function(t,e,n){var r=n("825a"),a=n("2a62");t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(c){throw a(t),c}}},a630:function(t,e,n){var r=n("23e7"),a=n("4df4"),i=n("1c7e"),c=!i((function(t){Array.from(t)}));r({target:"Array",stat:!0,forced:c},{from:a})},a9e3:function(t,e,n){"use strict";var r=n("83ab"),a=n("da84"),i=n("94ca"),c=n("6eeb"),s=n("5135"),o=n("c6b6"),u=n("7156"),l=n("c04e"),f=n("d039"),d=n("7c73"),p=n("241c").f,h=n("06cf").f,v=n("9bf2").f,m=n("58a8").trim,b="Number",g=a[b],_=g.prototype,O=o(d(_))==b,T=function(t){var e,n,r,a,i,c,s,o,u=l(t,!1);if("string"==typeof u&&u.length>2)if(u=m(u),e=u.charCodeAt(0),43===e||45===e){if(n=u.charCodeAt(2),88===n||120===n)return NaN}else if(48===e){switch(u.charCodeAt(1)){case 66:case 98:r=2,a=49;break;case 79:case 111:r=8,a=55;break;default:return+u}for(i=u.slice(2),c=i.length,s=0;s<c;s++)if(o=i.charCodeAt(s),o<48||o>a)return NaN;return parseInt(i,r)}return+u};if(i(b,!g(" 0o1")||!g("0b1")||g("+0x1"))){for(var y,w=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof w&&(O?f((function(){_.valueOf.call(n)})):o(n)!=b)?u(new g(T(e)),n,w):T(e)},C=r?p(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),j=0;C.length>j;j++)s(g,y=C[j])&&!s(w,y)&&v(w,y,h(g,y));w.prototype=_,_.constructor=w,c(a,b,w)}},b463:function(t,e,n){"use strict";n("42d1")},ed94:function(t,e,n){},f6c4:function(t,e,n){"use strict";n("3597")},f937:function(t,e,n){},fb6a:function(t,e,n){"use strict";var r=n("23e7"),a=n("861d"),i=n("e8b5"),c=n("23cb"),s=n("50c4"),o=n("fc6a"),u=n("8418"),l=n("b622"),f=n("1dde"),d=f("slice"),p=l("species"),h=[].slice,v=Math.max;r({target:"Array",proto:!0,forced:!d},{slice:function(t,e){var n,r,l,f=o(this),d=s(f.length),m=c(t,d),b=c(void 0===e?d:e,d);if(i(f)&&(n=f.constructor,"function"!=typeof n||n!==Array&&!i(n.prototype)?a(n)&&(n=n[p],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return h.call(f,m,b);for(r=new(void 0===n?Array:n)(v(b-m,0)),l=0;m<b;m++,l++)m in f&&u(r,l,f[m]);return r.length=l,r}})},fed0:function(t,e,n){"use strict";n.d(e,"j",(function(){return a})),n.d(e,"i",(function(){return i})),n.d(e,"k",(function(){return c})),n.d(e,"h",(function(){return s})),n.d(e,"f",(function(){return o})),n.d(e,"a",(function(){return u})),n.d(e,"c",(function(){return l})),n.d(e,"e",(function(){return f})),n.d(e,"b",(function(){return d})),n.d(e,"g",(function(){return p})),n.d(e,"d",(function(){return h}));var r=n("b775"),a=function(t){return Object(r["a"])({method:"POST",url:"/app/v1_0/authorizations",data:t})},i=function(t){return Object(r["a"])({method:"GET",url:"/app/v1_0/sms/codes/".concat(t)})},c=function(){return Object(r["a"])({method:"GET",url:"/app/v1_0/user"})},s=function(){return Object(r["a"])({method:"GET",url:"/app/v1_0/user/channels"})},o=function(){return Object(r["a"])({method:"GET",url:"/app/v1_0/channels"})},u=function(t){return Object(r["a"])({method:"PATCH",url:"/app/v1_0/user/channels",data:t})},l=function(t){return Object(r["a"])({method:"DELETE",url:"/app/v1_0/user/channels/".concat(t)})},f=function(t){return Object(r["a"])({method:"POST",url:"/app/v1_0/user/followings",data:t})},d=function(t){return Object(r["a"])({method:"DELETE",url:"/app/v1_0/user/followings/".concat(t)})},p=function(){return Object(r["a"])({method:"GET",url:"/app/v1_0/user/profile"})},h=function(t){return Object(r["a"])({method:"PATCH",url:"/app/v1_0/user/profile",data:t})}}}]);
//# sourceMappingURL=chunk-a5de3ed6.368e2516.js.map