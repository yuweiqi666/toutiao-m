(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-05618532"],{"0b7c":function(e,t,r){},1783:function(e,t,r){},"25f0":function(e,t,r){"use strict";var n=r("6eeb"),a=r("825a"),i=r("d039"),s=r("ad6d"),c="toString",o=RegExp.prototype,u=o[c],l=i((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),h=u.name!=c;(l||h)&&n(RegExp.prototype,c,(function(){var e=a(this),t=String(e.source),r=e.flags,n=String(void 0===r&&e instanceof RegExp&&!("flags"in o)?s.call(e):r);return"/"+t+"/"+n}),{unsafe:!0})},3859:function(e,t,r){"use strict";r("0b7c")},"44e7":function(e,t,r){var n=r("861d"),a=r("c6b6"),i=r("b622"),s=i("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[s])?!!t:"RegExp"==a(e))}},"4d63":function(e,t,r){var n=r("83ab"),a=r("da84"),i=r("94ca"),s=r("7156"),c=r("9bf2").f,o=r("241c").f,u=r("44e7"),l=r("ad6d"),h=r("9f7f"),f=r("6eeb"),d=r("d039"),v=r("69f3").enforce,p=r("2626"),g=r("b622"),b=g("match"),x=a.RegExp,S=x.prototype,m=/a/g,w=/a/g,y=new x(m)!==m,R=h.UNSUPPORTED_Y,k=n&&i("RegExp",!y||R||d((function(){return w[b]=!1,x(m)!=m||x(w)==w||"/a/i"!=x(m,"i")})));if(k){var E=function(e,t){var r,n=this instanceof E,a=u(e),i=void 0===t;if(!n&&a&&e.constructor===E&&i)return e;y?a&&!i&&(e=e.source):e instanceof E&&(i&&(t=l.call(e)),e=e.source),R&&(r=!!t&&t.indexOf("y")>-1,r&&(t=t.replace(/y/g,"")));var c=s(y?new x(e,t):x(e,t),n?this:S,E);if(R&&r){var o=v(c);o.sticky=!0}return c},H=function(e){e in E||c(E,e,{configurable:!0,get:function(){return x[e]},set:function(t){x[e]=t}})},O=o(x),j=0;while(O.length>j)H(O[j++]);S.constructor=E,E.prototype=S,f(a,"RegExp",E)}p("RegExp")},6062:function(e,t,r){"use strict";var n=r("6d61"),a=r("6566");e.exports=n("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),a)},6566:function(e,t,r){"use strict";var n=r("9bf2").f,a=r("7c73"),i=r("e2cc"),s=r("0366"),c=r("19aa"),o=r("2266"),u=r("7dd0"),l=r("2626"),h=r("83ab"),f=r("f183").fastKey,d=r("69f3"),v=d.set,p=d.getterFor;e.exports={getConstructor:function(e,t,r,u){var l=e((function(e,n){c(e,l,t),v(e,{type:t,index:a(null),first:void 0,last:void 0,size:0}),h||(e.size=0),void 0!=n&&o(n,e[u],{that:e,AS_ENTRIES:r})})),d=p(t),g=function(e,t,r){var n,a,i=d(e),s=b(e,t);return s?s.value=r:(i.last=s={index:a=f(t,!0),key:t,value:r,previous:n=i.last,next:void 0,removed:!1},i.first||(i.first=s),n&&(n.next=s),h?i.size++:e.size++,"F"!==a&&(i.index[a]=s)),e},b=function(e,t){var r,n=d(e),a=f(t);if("F"!==a)return n.index[a];for(r=n.first;r;r=r.next)if(r.key==t)return r};return i(l.prototype,{clear:function(){var e=this,t=d(e),r=t.index,n=t.first;while(n)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete r[n.index],n=n.next;t.first=t.last=void 0,h?t.size=0:e.size=0},delete:function(e){var t=this,r=d(t),n=b(t,e);if(n){var a=n.next,i=n.previous;delete r.index[n.index],n.removed=!0,i&&(i.next=a),a&&(a.previous=i),r.first==n&&(r.first=a),r.last==n&&(r.last=i),h?r.size--:t.size--}return!!n},forEach:function(e){var t,r=d(this),n=s(e,arguments.length>1?arguments[1]:void 0,3);while(t=t?t.next:r.first){n(t.value,t.key,this);while(t&&t.removed)t=t.previous}},has:function(e){return!!b(this,e)}}),i(l.prototype,r?{get:function(e){var t=b(this,e);return t&&t.value},set:function(e,t){return g(this,0===e?0:e,t)}}:{add:function(e){return g(this,e=0===e?0:e,e)}}),h&&n(l.prototype,"size",{get:function(){return d(this).size}}),l},setStrong:function(e,t,r){var n=t+" Iterator",a=p(t),i=p(n);u(e,t,(function(e,t){v(this,{type:n,target:e,state:a(e),kind:t,last:void 0})}),(function(){var e=i(this),t=e.kind,r=e.last;while(r&&r.removed)r=r.previous;return e.target&&(e.last=r=r?r.next:e.state.first)?"keys"==t?{value:r.key,done:!1}:"values"==t?{value:r.value,done:!1}:{value:[r.key,r.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),r?"entries":"values",!r,!0),l(t)}}},"6d61":function(e,t,r){"use strict";var n=r("23e7"),a=r("da84"),i=r("94ca"),s=r("6eeb"),c=r("f183"),o=r("2266"),u=r("19aa"),l=r("861d"),h=r("d039"),f=r("1c7e"),d=r("d44e"),v=r("7156");e.exports=function(e,t,r){var p=-1!==e.indexOf("Map"),g=-1!==e.indexOf("Weak"),b=p?"set":"add",x=a[e],S=x&&x.prototype,m=x,w={},y=function(e){var t=S[e];s(S,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(g&&!l(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return g&&!l(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(g&&!l(e))&&t.call(this,0===e?0:e)}:function(e,r){return t.call(this,0===e?0:e,r),this})},R=i(e,"function"!=typeof x||!(g||S.forEach&&!h((function(){(new x).entries().next()}))));if(R)m=r.getConstructor(t,e,p,b),c.REQUIRED=!0;else if(i(e,!0)){var k=new m,E=k[b](g?{}:-0,1)!=k,H=h((function(){k.has(1)})),O=f((function(e){new x(e)})),j=!g&&h((function(){var e=new x,t=5;while(t--)e[b](t,t);return!e.has(-0)}));O||(m=t((function(t,r){u(t,m,e);var n=v(new x,t,m);return void 0!=r&&o(r,n[b],{that:n,AS_ENTRIES:p}),n})),m.prototype=S,S.constructor=m),(H||j)&&(y("delete"),y("has"),p&&y("get")),(j||E)&&y(b),g&&S.clear&&delete S.clear}return w[e]=m,n({global:!0,forced:m!=x},w),d(m,e),g||r.setStrong(m,e,p),m}},"6f21":function(e,t,r){},"75f3":function(e,t,r){},"99af":function(e,t,r){"use strict";var n=r("23e7"),a=r("d039"),i=r("e8b5"),s=r("861d"),c=r("7b0b"),o=r("50c4"),u=r("8418"),l=r("65f0"),h=r("1dde"),f=r("b622"),d=r("2d00"),v=f("isConcatSpreadable"),p=9007199254740991,g="Maximum allowed index exceeded",b=d>=51||!a((function(){var e=[];return e[v]=!1,e.concat()[0]!==e})),x=h("concat"),S=function(e){if(!s(e))return!1;var t=e[v];return void 0!==t?!!t:i(e)},m=!b||!x;n({target:"Array",proto:!0,forced:m},{concat:function(e){var t,r,n,a,i,s=c(this),h=l(s,0),f=0;for(t=-1,n=arguments.length;t<n;t++)if(i=-1===t?s:arguments[t],S(i)){if(a=o(i.length),f+a>p)throw TypeError(g);for(r=0;r<a;r++,f++)r in i&&u(h,f,i[r])}else{if(f>=p)throw TypeError(g);u(h,f++,i)}return h.length=f,h}})},ad72:function(e,t,r){"use strict";r("1783")},aea2:function(e,t,r){"use strict";r("75f3")},bb2f:function(e,t,r){var n=r("d039");e.exports=!n((function(){return Object.isExtensible(Object.preventExtensions({}))}))},bc99:function(e,t,r){"use strict";r("6f21")},efe3:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"searchArticle"},[r("form",{attrs:{action:"/"}},[r("van-search",{attrs:{background:"#3296fa",placeholder:"请输入搜索关键词","show-action":""},on:{search:function(t){return e.onSearch(e.searchValue)},cancel:function(t){return e.$router.back()},focus:e.onFocus},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}})],1),e.isResultShow?r("search-result",{attrs:{searchValue:e.searchValue}}):e.searchValue?r("search-suggestion",{attrs:{searchValue:e.searchValue},on:{handleSuggestionSearch:function(t){return e.onSearch(t)}}}):r("search-history",{attrs:{searchHistories:e.searchHistories},on:{handleClickSearchHistory:function(t){return e.onSearch(t.item)},handleDeleteSearchHistory:e.deleteHistory,handleDeleteAllSearchHistory:e.deleteAllSearchHistory}})],1)},a=[],i=r("2909"),s=r("1da1"),c=r("5530"),o=(r("96cf"),r("99af"),r("d3b7"),r("6062"),r("3ca3"),r("ddb0"),r("c975"),r("a434"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"search-suggestion"},e._l(e.valSuggestions,(function(t,n){return r("van-cell",{key:n,attrs:{icon:"search"},on:{click:function(r){return e.hanldeSearchResult(t)}}},[r("div",{attrs:{slot:"title"},domProps:{innerHTML:e._s(e.heightLight(t))},slot:"title"})])})),1)}),u=[],l=(r("4d63"),r("ac1f"),r("25f0"),r("5319"),r("b775")),h=function(e){return Object(l["a"])({method:"GET",url:"/app/v1_0/suggestion",params:e})},f=function(e){return Object(l["a"])({method:"GET",url:"/app/v1_0/search",params:e})},d=function(){return Object(l["a"])({method:"GET",url:"/app/v1_0/search/histories"})},v=function(){return Object(l["a"])({method:"DELETE",url:"/app/v1_0/search/histories"})},p=r("2ef0"),g={name:"SearchSuggestion",props:{searchValue:{type:String}},data:function(){return{valSuggestions:[]}},computed:{},methods:{heightLight:function(e){var t=new RegExp(this.searchValue,"gi"),r=e.replace(t,"<span class='highLisght-style'>".concat(this.searchValue,"</span>"));return r},getResultSuggestion:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,h({q:e});case 3:n=r.sent,a=n.data,t.valSuggestions=a.data.options,r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](0),console.log("搜索联想错误");case 11:case"end":return r.stop()}}),r,null,[[0,8]])})))()},hanldeSearchResult:function(e){console.log("suggestion",e),this.$emit("handleSuggestionSearch",e)}},watch:{searchValue:{handler:Object(p["debounce"])((function(e,t){this.getResultSuggestion(e)}),500,{leading:!0}),immediate:!0}}},b=g,x=(r("ad72"),r("2877")),S=Object(x["a"])(b,o,u,!1,null,"7d116679",null),m=S.exports,w=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"search-history"},[r("van-cell",{attrs:{title:"历史记录"}},[e.deleteShow?r("div",{staticClass:"search-icon",attrs:{slot:"right-icon"},on:{click:function(t){e.deleteShow=!e.deleteShow}},slot:"right-icon"},[r("van-icon",{attrs:{name:"delete-o"}})],1):r("div",{attrs:{slot:"default"},slot:"default"},[r("span",{staticClass:"delete-search",on:{click:e.deleteAllSearchHistory}},[e._v("全部删除")]),e._v(" "),r("span",{staticClass:"delete-search",on:{click:function(t){e.deleteShow=!e.deleteShow}}},[e._v("完成")])])]),e._l(e.searchHistories,(function(t,n){return r("van-cell",{key:n,attrs:{title:t},on:{click:function(r){return e.clickSearchHistory({item:t,index:n})}}},[e.deleteShow?e._e():r("div",{attrs:{slot:"right-icon"},slot:"right-icon"},[r("van-icon",{attrs:{name:"close"}})],1)])}))],2)},y=[],R={name:"SearchHistory",props:{searchHistories:{type:Array}},data:function(){return{deleteShow:!0}},methods:{clickSearchHistory:function(e){this.deleteShow?this.$emit("handleClickSearchHistory",e):this.$emit("handleDeleteSearchHistory",e)},deleteAllSearchHistory:function(){this.$emit("handleDeleteAllSearchHistory")}}},k=R,E=(r("bc99"),Object(x["a"])(k,w,y,!1,null,"5a537798",null)),H=E.exports,O=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"search-result"},[r("van-list",{attrs:{finished:e.finished,"finished-text":"没有更多了"},on:{load:e.onLoad},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},e._l(e.searchResultList,(function(t){return r("van-cell",{key:+t.art_id,attrs:{title:t.title},on:{click:function(r){return e.handleArticleDetail(t.art_id)}}})})),1)],1)},j=[],_={name:"SearchResult",data:function(){return{finished:!1,loading:!1,searchResultList:[],page:1}},props:{searchValue:{type:String}},methods:{onLoad:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,n,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f({q:e.searchValue,page:e.page});case 3:n=t.sent,a=n.data,s=a.data.results,(r=e.searchResultList).push.apply(r,Object(i["a"])(s)),console.log("this.searchResultList",e.searchResultList),e.loading=!1,0===s.length?e.finished=!0:e.page++,t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](0),console.log("获取搜索结果失败",t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})))()},handleArticleDetail:function(e){console.log("跳转详情页",e),this.$router.push({name:"articleDetail",params:{articleId:e}})}}},V=_,D=(r("aea2"),Object(x["a"])(V,O,j,!1,null,"eb3a86b2",null)),A=D.exports,C=r("5d2d"),L=r("2f62"),z={name:"SearchArticle",data:function(){return{searchValue:"",isResultShow:!1,searchResult:[],searchHistories:Object(C["a"])("searchHistories")||[]}},components:{SearchSuggestion:m,SearchHistory:H,SearchResult:A},computed:Object(c["a"])({},Object(L["b"])(["user"])),created:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,n,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.user){t.next=16;break}return t.prev=1,t.next=4,d();case 4:n=t.sent,a=n.data,console.log("搜索历史数据",a),s=a.data.keywords,(r=console).log.apply(r,["keywords"].concat(Object(i["a"])(s))),e.searchHistories=Object(i["a"])(new Set([].concat(Object(i["a"])(e.searchHistories),Object(i["a"])(s)))),console.log("this.searchHistories",e.searchHistories),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](1),console.log("获取搜索历史失败");case 16:case"end":return t.stop()}}),t,null,[[1,13]])})))()},methods:{onSearch:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.searchValue=e,n=t.searchHistories.indexOf(t.searchValue),-1!==n&&t.searchHistories.splice(n,1),t.searchHistories.unshift(t.searchValue),t.isResultShow=!0;case 5:case"end":return r.stop()}}),r)})))()},onFocus:function(){this.isResultShow=this.isResultShow&&!this.isResultShow,console.log(this.isResultShow)},deleteHistory:function(e){console.log("要删除的历史记录",e),this.searchHistories.splice(e.index,1)},deleteAllSearchHistory:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.searchHistories=[],!e.user){t.next=10;break}return t.prev=2,t.next=5,v();case 5:t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](2),console.log("删除所有历史数据失败");case 10:case"end":return t.stop()}}),t,null,[[2,7]])})))()}},watch:{searchHistories:{handler:function(e,t){Object(C["b"])("searchHistories",e)}}}},T=z,$=(r("3859"),Object(x["a"])(T,n,a,!1,null,"d584e2ca",null));t["default"]=$.exports},f183:function(e,t,r){var n=r("d012"),a=r("861d"),i=r("5135"),s=r("9bf2").f,c=r("90e3"),o=r("bb2f"),u=c("meta"),l=0,h=Object.isExtensible||function(){return!0},f=function(e){s(e,u,{value:{objectID:"O"+ ++l,weakData:{}}})},d=function(e,t){if(!a(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,u)){if(!h(e))return"F";if(!t)return"E";f(e)}return e[u].objectID},v=function(e,t){if(!i(e,u)){if(!h(e))return!0;if(!t)return!1;f(e)}return e[u].weakData},p=function(e){return o&&g.REQUIRED&&h(e)&&!i(e,u)&&f(e),e},g=e.exports={REQUIRED:!1,fastKey:d,getWeakData:v,onFreeze:p};n[u]=!0}}]);
//# sourceMappingURL=chunk-05618532.0e42a922.js.map