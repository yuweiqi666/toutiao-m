(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-904b61f4"],{"0b7c":function(e,t,r){},1783:function(e,t,r){},"25f0":function(e,t,r){"use strict";var n=r("6eeb"),a=r("825a"),i=r("d039"),o=r("ad6d"),s="toString",c=RegExp.prototype,u=c[s],l=i((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),f=u.name!=s;(l||f)&&n(RegExp.prototype,s,(function(){var e=a(this),t=String(e.source),r=e.flags,n=String(void 0===r&&e instanceof RegExp&&!("flags"in c)?o.call(e):r);return"/"+t+"/"+n}),{unsafe:!0})},2909:function(e,t,r){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(e){if(Array.isArray(e))return n(e)}r.d(t,"a",(function(){return c}));r("a4d3"),r("e01a"),r("d3b7"),r("d28b"),r("3ca3"),r("ddb0"),r("a630");function i(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}r("fb6a");function o(e,t){if(e){if("string"===typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e){return a(e)||i(e)||o(e)||s()}},3859:function(e,t,r){"use strict";r("0b7c")},"44e7":function(e,t,r){var n=r("861d"),a=r("c6b6"),i=r("b622"),o=i("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==a(e))}},"4d63":function(e,t,r){var n=r("83ab"),a=r("da84"),i=r("94ca"),o=r("7156"),s=r("9bf2").f,c=r("241c").f,u=r("44e7"),l=r("ad6d"),f=r("9f7f"),h=r("6eeb"),d=r("d039"),v=r("69f3").enforce,p=r("2626"),g=r("b622"),b=g("match"),y=a.RegExp,m=y.prototype,x=/a/g,S=/a/g,w=new y(x)!==x,R=f.UNSUPPORTED_Y,k=n&&i("RegExp",!w||R||d((function(){return S[b]=!1,y(x)!=x||y(S)==S||"/a/i"!=y(x,"i")})));if(k){var E=function(e,t){var r,n=this instanceof E,a=u(e),i=void 0===t;if(!n&&a&&e.constructor===E&&i)return e;w?a&&!i&&(e=e.source):e instanceof E&&(i&&(t=l.call(e)),e=e.source),R&&(r=!!t&&t.indexOf("y")>-1,r&&(t=t.replace(/y/g,"")));var s=o(w?new y(e,t):y(e,t),n?this:m,E);if(R&&r){var c=v(s);c.sticky=!0}return s},H=function(e){e in E||s(E,e,{configurable:!0,get:function(){return y[e]},set:function(t){y[e]=t}})},O=c(y),j=0;while(O.length>j)H(O[j++]);m.constructor=E,E.prototype=m,h(a,"RegExp",E)}p("RegExp")},"4df4":function(e,t,r){"use strict";var n=r("0366"),a=r("7b0b"),i=r("9bdd"),o=r("e95a"),s=r("50c4"),c=r("8418"),u=r("35a1");e.exports=function(e){var t,r,l,f,h,d,v=a(e),p="function"==typeof this?this:Array,g=arguments.length,b=g>1?arguments[1]:void 0,y=void 0!==b,m=u(v),x=0;if(y&&(b=n(b,g>2?arguments[2]:void 0,2)),void 0==m||p==Array&&o(m))for(t=s(v.length),r=new p(t);t>x;x++)d=y?b(v[x],x):v[x],c(r,x,d);else for(f=m.call(v),h=f.next,r=new p;!(l=h.call(f)).done;x++)d=y?i(f,b,[l.value,x],!0):l.value,c(r,x,d);return r.length=x,r}},6062:function(e,t,r){"use strict";var n=r("6d61"),a=r("6566");e.exports=n("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),a)},6566:function(e,t,r){"use strict";var n=r("9bf2").f,a=r("7c73"),i=r("e2cc"),o=r("0366"),s=r("19aa"),c=r("2266"),u=r("7dd0"),l=r("2626"),f=r("83ab"),h=r("f183").fastKey,d=r("69f3"),v=d.set,p=d.getterFor;e.exports={getConstructor:function(e,t,r,u){var l=e((function(e,n){s(e,l,t),v(e,{type:t,index:a(null),first:void 0,last:void 0,size:0}),f||(e.size=0),void 0!=n&&c(n,e[u],{that:e,AS_ENTRIES:r})})),d=p(t),g=function(e,t,r){var n,a,i=d(e),o=b(e,t);return o?o.value=r:(i.last=o={index:a=h(t,!0),key:t,value:r,previous:n=i.last,next:void 0,removed:!1},i.first||(i.first=o),n&&(n.next=o),f?i.size++:e.size++,"F"!==a&&(i.index[a]=o)),e},b=function(e,t){var r,n=d(e),a=h(t);if("F"!==a)return n.index[a];for(r=n.first;r;r=r.next)if(r.key==t)return r};return i(l.prototype,{clear:function(){var e=this,t=d(e),r=t.index,n=t.first;while(n)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete r[n.index],n=n.next;t.first=t.last=void 0,f?t.size=0:e.size=0},delete:function(e){var t=this,r=d(t),n=b(t,e);if(n){var a=n.next,i=n.previous;delete r.index[n.index],n.removed=!0,i&&(i.next=a),a&&(a.previous=i),r.first==n&&(r.first=a),r.last==n&&(r.last=i),f?r.size--:t.size--}return!!n},forEach:function(e){var t,r=d(this),n=o(e,arguments.length>1?arguments[1]:void 0,3);while(t=t?t.next:r.first){n(t.value,t.key,this);while(t&&t.removed)t=t.previous}},has:function(e){return!!b(this,e)}}),i(l.prototype,r?{get:function(e){var t=b(this,e);return t&&t.value},set:function(e,t){return g(this,0===e?0:e,t)}}:{add:function(e){return g(this,e=0===e?0:e,e)}}),f&&n(l.prototype,"size",{get:function(){return d(this).size}}),l},setStrong:function(e,t,r){var n=t+" Iterator",a=p(t),i=p(n);u(e,t,(function(e,t){v(this,{type:n,target:e,state:a(e),kind:t,last:void 0})}),(function(){var e=i(this),t=e.kind,r=e.last;while(r&&r.removed)r=r.previous;return e.target&&(e.last=r=r?r.next:e.state.first)?"keys"==t?{value:r.key,done:!1}:"values"==t?{value:r.value,done:!1}:{value:[r.key,r.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),r?"entries":"values",!r,!0),l(t)}}},"6d61":function(e,t,r){"use strict";var n=r("23e7"),a=r("da84"),i=r("94ca"),o=r("6eeb"),s=r("f183"),c=r("2266"),u=r("19aa"),l=r("861d"),f=r("d039"),h=r("1c7e"),d=r("d44e"),v=r("7156");e.exports=function(e,t,r){var p=-1!==e.indexOf("Map"),g=-1!==e.indexOf("Weak"),b=p?"set":"add",y=a[e],m=y&&y.prototype,x=y,S={},w=function(e){var t=m[e];o(m,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(g&&!l(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return g&&!l(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(g&&!l(e))&&t.call(this,0===e?0:e)}:function(e,r){return t.call(this,0===e?0:e,r),this})},R=i(e,"function"!=typeof y||!(g||m.forEach&&!f((function(){(new y).entries().next()}))));if(R)x=r.getConstructor(t,e,p,b),s.REQUIRED=!0;else if(i(e,!0)){var k=new x,E=k[b](g?{}:-0,1)!=k,H=f((function(){k.has(1)})),O=h((function(e){new y(e)})),j=!g&&f((function(){var e=new y,t=5;while(t--)e[b](t,t);return!e.has(-0)}));O||(x=t((function(t,r){u(t,x,e);var n=v(new y,t,x);return void 0!=r&&c(r,n[b],{that:n,AS_ENTRIES:p}),n})),x.prototype=m,m.constructor=x),(H||j)&&(w("delete"),w("has"),p&&w("get")),(j||E)&&w(b),g&&m.clear&&delete m.clear}return S[e]=x,n({global:!0,forced:x!=y},S),d(x,e),g||r.setStrong(x,e,p),x}},"6f21":function(e,t,r){},7156:function(e,t,r){var n=r("861d"),a=r("d2bb");e.exports=function(e,t,r){var i,o;return a&&"function"==typeof(i=t.constructor)&&i!==r&&n(o=i.prototype)&&o!==r.prototype&&a(e,o),e}},"75f3":function(e,t,r){},"99af":function(e,t,r){"use strict";var n=r("23e7"),a=r("d039"),i=r("e8b5"),o=r("861d"),s=r("7b0b"),c=r("50c4"),u=r("8418"),l=r("65f0"),f=r("1dde"),h=r("b622"),d=r("2d00"),v=h("isConcatSpreadable"),p=9007199254740991,g="Maximum allowed index exceeded",b=d>=51||!a((function(){var e=[];return e[v]=!1,e.concat()[0]!==e})),y=f("concat"),m=function(e){if(!o(e))return!1;var t=e[v];return void 0!==t?!!t:i(e)},x=!b||!y;n({target:"Array",proto:!0,forced:x},{concat:function(e){var t,r,n,a,i,o=s(this),f=l(o,0),h=0;for(t=-1,n=arguments.length;t<n;t++)if(i=-1===t?o:arguments[t],m(i)){if(a=c(i.length),h+a>p)throw TypeError(g);for(r=0;r<a;r++,h++)r in i&&u(f,h,i[r])}else{if(h>=p)throw TypeError(g);u(f,h++,i)}return f.length=h,f}})},"9bdd":function(e,t,r){var n=r("825a"),a=r("2a62");e.exports=function(e,t,r,i){try{return i?t(n(r)[0],r[1]):t(r)}catch(o){throw a(e),o}}},a630:function(e,t,r){var n=r("23e7"),a=r("4df4"),i=r("1c7e"),o=!i((function(e){Array.from(e)}));n({target:"Array",stat:!0,forced:o},{from:a})},ad72:function(e,t,r){"use strict";r("1783")},aea2:function(e,t,r){"use strict";r("75f3")},bb2f:function(e,t,r){var n=r("d039");e.exports=!n((function(){return Object.isExtensible(Object.preventExtensions({}))}))},bc99:function(e,t,r){"use strict";r("6f21")},efe3:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"searchArticle"},[r("form",{attrs:{action:"/"}},[r("van-search",{attrs:{background:"#3296fa",placeholder:"请输入搜索关键词","show-action":""},on:{search:function(t){return e.onSearch(e.searchValue)},cancel:function(t){return e.$router.back()},focus:e.onFocus},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}})],1),e.isResultShow?r("search-result",{attrs:{searchValue:e.searchValue}}):e.searchValue?r("search-suggestion",{attrs:{searchValue:e.searchValue},on:{handleSuggestionSearch:function(t){return e.onSearch(t)}}}):r("search-history",{attrs:{searchHistories:e.searchHistories},on:{handleClickSearchHistory:function(t){return e.onSearch(t.item)},handleDeleteSearchHistory:e.deleteHistory,handleDeleteAllSearchHistory:e.deleteAllSearchHistory}})],1)},a=[],i=r("2909"),o=r("1da1"),s=r("5530"),c=(r("96cf"),r("99af"),r("d3b7"),r("6062"),r("3ca3"),r("ddb0"),r("c975"),r("a434"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"search-suggestion"},e._l(e.valSuggestions,(function(t,n){return r("van-cell",{key:n,attrs:{icon:"search"},on:{click:function(r){return e.hanldeSearchResult(t)}}},[r("div",{attrs:{slot:"title"},domProps:{innerHTML:e._s(e.heightLight(t))},slot:"title"})])})),1)}),u=[],l=(r("4d63"),r("ac1f"),r("25f0"),r("5319"),r("b775")),f=function(e){return Object(l["a"])({method:"GET",url:"/app/v1_0/suggestion",params:e})},h=function(e){return Object(l["a"])({method:"GET",url:"/app/v1_0/search",params:e})},d=function(){return Object(l["a"])({method:"GET",url:"/app/v1_0/search/histories"})},v=function(){return Object(l["a"])({method:"DELETE",url:"/app/v1_0/search/histories"})},p=r("2ef0"),g={name:"SearchSuggestion",props:{searchValue:{type:String}},data:function(){return{valSuggestions:[]}},computed:{},methods:{heightLight:function(e){var t=new RegExp(this.searchValue,"gi"),r=e.replace(t,"<span class='highLisght-style'>".concat(this.searchValue,"</span>"));return r},getResultSuggestion:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,f({q:e});case 3:n=r.sent,a=n.data,t.valSuggestions=a.data.options,r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](0),console.log("搜索联想错误");case 11:case"end":return r.stop()}}),r,null,[[0,8]])})))()},hanldeSearchResult:function(e){console.log("suggestion",e),this.$emit("handleSuggestionSearch",e)}},watch:{searchValue:{handler:Object(p["debounce"])((function(e,t){this.getResultSuggestion(e)}),500,{leading:!0}),immediate:!0}}},b=g,y=(r("ad72"),r("2877")),m=Object(y["a"])(b,c,u,!1,null,"7d116679",null),x=m.exports,S=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"search-history"},[r("van-cell",{attrs:{title:"历史记录"}},[e.deleteShow?r("div",{staticClass:"search-icon",attrs:{slot:"right-icon"},on:{click:function(t){e.deleteShow=!e.deleteShow}},slot:"right-icon"},[r("van-icon",{attrs:{name:"delete-o"}})],1):r("div",{attrs:{slot:"default"},slot:"default"},[r("span",{staticClass:"delete-search",on:{click:e.deleteAllSearchHistory}},[e._v("全部删除")]),e._v(" "),r("span",{staticClass:"delete-search",on:{click:function(t){e.deleteShow=!e.deleteShow}}},[e._v("完成")])])]),e._l(e.searchHistories,(function(t,n){return r("van-cell",{key:n,attrs:{title:t},on:{click:function(r){return e.clickSearchHistory({item:t,index:n})}}},[e.deleteShow?e._e():r("div",{attrs:{slot:"right-icon"},slot:"right-icon"},[r("van-icon",{attrs:{name:"close"}})],1)])}))],2)},w=[],R={name:"SearchHistory",props:{searchHistories:{type:Array}},data:function(){return{deleteShow:!0}},methods:{clickSearchHistory:function(e){this.deleteShow?this.$emit("handleClickSearchHistory",e):this.$emit("handleDeleteSearchHistory",e)},deleteAllSearchHistory:function(){this.$emit("handleDeleteAllSearchHistory")}}},k=R,E=(r("bc99"),Object(y["a"])(k,S,w,!1,null,"5a537798",null)),H=E.exports,O=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"search-result"},[r("van-list",{attrs:{finished:e.finished,"finished-text":"没有更多了"},on:{load:e.onLoad},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},e._l(e.searchResultList,(function(t){return r("van-cell",{key:+t.art_id,attrs:{title:t.title},on:{click:function(r){return e.handleArticleDetail(t.art_id)}}})})),1)],1)},j=[],A={name:"SearchResult",data:function(){return{finished:!1,loading:!1,searchResultList:[],page:1}},props:{searchValue:{type:String}},methods:{onLoad:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,n,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h({q:e.searchValue,page:e.page});case 3:n=t.sent,a=n.data,o=a.data.results,(r=e.searchResultList).push.apply(r,Object(i["a"])(o)),console.log("this.searchResultList",e.searchResultList),e.loading=!1,0===o.length?e.finished=!0:e.page++,t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](0),console.log("获取搜索结果失败",t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})))()},handleArticleDetail:function(e){console.log("跳转详情页",e),this.$router.push({name:"articleDetail",params:{articleId:e}})}}},_=A,V=(r("aea2"),Object(y["a"])(_,O,j,!1,null,"eb3a86b2",null)),D=V.exports,C=r("5d2d"),I=r("2f62"),L={name:"SearchArticle",data:function(){return{searchValue:"",isResultShow:!1,searchResult:[],searchHistories:Object(C["a"])("searchHistories")||[]}},components:{SearchSuggestion:x,SearchHistory:H,SearchResult:D},computed:Object(s["a"])({},Object(I["b"])(["user"])),created:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,n,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.user){t.next=16;break}return t.prev=1,t.next=4,d();case 4:n=t.sent,a=n.data,console.log("搜索历史数据",a),o=a.data.keywords,(r=console).log.apply(r,["keywords"].concat(Object(i["a"])(o))),e.searchHistories=Object(i["a"])(new Set([].concat(Object(i["a"])(e.searchHistories),Object(i["a"])(o)))),console.log("this.searchHistories",e.searchHistories),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](1),console.log("获取搜索历史失败");case 16:case"end":return t.stop()}}),t,null,[[1,13]])})))()},methods:{onSearch:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.searchValue=e,n=t.searchHistories.indexOf(t.searchValue),-1!==n&&t.searchHistories.splice(n,1),t.searchHistories.unshift(t.searchValue),t.isResultShow=!0;case 5:case"end":return r.stop()}}),r)})))()},onFocus:function(){this.isResultShow=this.isResultShow&&!this.isResultShow,console.log(this.isResultShow)},deleteHistory:function(e){console.log("要删除的历史记录",e),this.searchHistories.splice(e.index,1)},deleteAllSearchHistory:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.searchHistories=[],!e.user){t.next=10;break}return t.prev=2,t.next=5,v();case 5:t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](2),console.log("删除所有历史数据失败");case 10:case"end":return t.stop()}}),t,null,[[2,7]])})))()}},watch:{searchHistories:{handler:function(e,t){Object(C["b"])("searchHistories",e)}}}},z=L,T=(r("3859"),Object(y["a"])(z,n,a,!1,null,"d584e2ca",null));t["default"]=T.exports},f183:function(e,t,r){var n=r("d012"),a=r("861d"),i=r("5135"),o=r("9bf2").f,s=r("90e3"),c=r("bb2f"),u=s("meta"),l=0,f=Object.isExtensible||function(){return!0},h=function(e){o(e,u,{value:{objectID:"O"+ ++l,weakData:{}}})},d=function(e,t){if(!a(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,u)){if(!f(e))return"F";if(!t)return"E";h(e)}return e[u].objectID},v=function(e,t){if(!i(e,u)){if(!f(e))return!0;if(!t)return!1;h(e)}return e[u].weakData},p=function(e){return c&&g.REQUIRED&&f(e)&&!i(e,u)&&h(e),e},g=e.exports={REQUIRED:!1,fastKey:d,getWeakData:v,onFreeze:p};n[u]=!0},fb6a:function(e,t,r){"use strict";var n=r("23e7"),a=r("861d"),i=r("e8b5"),o=r("23cb"),s=r("50c4"),c=r("fc6a"),u=r("8418"),l=r("b622"),f=r("1dde"),h=f("slice"),d=l("species"),v=[].slice,p=Math.max;n({target:"Array",proto:!0,forced:!h},{slice:function(e,t){var r,n,l,f=c(this),h=s(f.length),g=o(e,h),b=o(void 0===t?h:t,h);if(i(f)&&(r=f.constructor,"function"!=typeof r||r!==Array&&!i(r.prototype)?a(r)&&(r=r[d],null===r&&(r=void 0)):r=void 0,r===Array||void 0===r))return v.call(f,g,b);for(n=new(void 0===r?Array:r)(p(b-g,0)),l=0;g<b;g++,l++)g in f&&u(n,l,f[g]);return n.length=l,n}})}}]);
//# sourceMappingURL=chunk-904b61f4.3a5a2141.js.map