{"version":3,"sources":["webpack:///./src/views/mine/index.vue?133d","webpack:///src/views/mine/index.vue","webpack:///./src/views/mine/index.vue?6fd8","webpack:///./src/views/mine/index.vue","webpack:///./src/views/mine/index.vue?28fc","webpack:///./src/http/user.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","slot","currentUser","photo","_v","_s","name","on","editData","art_count","follow_count","fans_count","like_count","$event","$router","push","query","redirect","handleLogout","_e","staticRenderFns","data","e","computed","methods","$dialog","confirm","title","message","console","log","created","user","getCurrentUserInfo","component","hanldeLoginApi","request","method","url","handleSendMobileMessageApi","userInfoApi","getUserTabsListApi","getAllChannelsApi","addUserChannelApi","deleteUserChannelApi","followAutorApi","cancelFollowAutorApi","target","getUserProfitApi"],"mappings":"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","file":"js/chunk-d802734c.d36b252f.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"mine\"},[(_vm.user)?_c('van-cell-group',{staticClass:\"topMsg\"},[_c('van-cell',{staticClass:\"avatorMsg\",attrs:{\"center\":\"\",\"border\":false}},[_c('div',{attrs:{\"slot\":\"icon\"},slot:\"icon\"},[_c('van-image',{attrs:{\"round\":\"\",\"src\":_vm.currentUser.photo,\"fit\":\"cover\"}})],1),_c('div',{attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(\" \"+_vm._s(_vm.currentUser.name)+\" \")]),_c('div',{attrs:{\"slot\":\"right-icon\"},slot:\"right-icon\"},[_c('van-button',{attrs:{\"round\":\"\",\"size\":\"small\"},on:{\"click\":_vm.editData}},[_vm._v(\"编辑资料\")])],1)]),_c('van-grid',{attrs:{\"border\":false}},[_c('van-grid-item',[_c('div',{staticClass:\"title\",attrs:{\"slot\":\"text\"},slot:\"text\"},[_vm._v(_vm._s(_vm.currentUser.art_count))]),_c('div',{staticClass:\"text\",attrs:{\"slot\":\"text\"},slot:\"text\"},[_vm._v(\"头条\")])]),_c('van-grid-item',[_c('div',{staticClass:\"title\",attrs:{\"slot\":\"text\"},slot:\"text\"},[_vm._v(_vm._s(_vm.currentUser.follow_count))]),_c('div',{staticClass:\"text\",attrs:{\"slot\":\"text\"},slot:\"text\"},[_vm._v(\"关注\")])]),_c('van-grid-item',[_c('div',{staticClass:\"title\",attrs:{\"slot\":\"text\"},slot:\"text\"},[_vm._v(_vm._s(_vm.currentUser.fans_count))]),_c('div',{staticClass:\"text\",attrs:{\"slot\":\"text\"},slot:\"text\"},[_vm._v(\"粉丝\")])]),_c('van-grid-item',[_c('div',{staticClass:\"title\",attrs:{\"slot\":\"text\"},slot:\"text\"},[_vm._v(_vm._s(_vm.currentUser.like_count))]),_c('div',{staticClass:\"text\",attrs:{\"slot\":\"text\"},slot:\"text\"},[_vm._v(\"获赞\")])])],1)],1):_c('van-cell-group',{staticClass:\"no-login\",attrs:{\"border\":false}},[_c('van-cell',[_c('div',{staticClass:\"no-login-wrapper\",attrs:{\"slot\":\"title\"},on:{\"click\":function($event){return _vm.$router.push({\n        name: 'login',\n        query: {\n          redirect: '/mine'\n        }\n      })}},slot:\"title\"},[_c('div',[_c('i',{staticClass:\"iconfont toutiao-wode\"})]),_c('div',[_vm._v(\"登录 / 注册\")])])])],1),_c('van-grid',{staticClass:\"saveMsg\",attrs:{\"column-num\":2,\"border\":false}},[_c('van-grid-item',{attrs:{\"icon-prefix\":\"iconfont toutiao\",\"icon\":\"shoucang\",\"text\":\"收藏\"}}),_c('van-grid-item',{attrs:{\"icon-prefix\":\"iconfont toutiao\",\"icon\":\"lishi\",\"text\":\"历史\"}})],1),_c('van-cell',{attrs:{\"title\":\"小智同学\",\"is-link\":\"\",\"to\":\"chat\"}}),(_vm.user)?_c('van-cell',{staticClass:\"logout\",attrs:{\"title\":\"退出登录\"},on:{\"click\":_vm.handleLogout}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"mine\">\r\n    <van-cell-group v-if=\"user\" class=\"topMsg\">\r\n      <!-- 顶部头像和数据信息 -->\r\n      <van-cell center class=\"avatorMsg\" :border=\"false\">\r\n        <!-- 左侧头像插槽 -->\r\n        <div slot=\"icon\">\r\n          <van-image\r\n            round\r\n            :src=\"currentUser.photo\"\r\n            fit=\"cover\"\r\n          />\r\n        </div>\r\n        <!-- 左侧昵称插槽 -->\r\n        <div slot=\"title\">\r\n          {{currentUser.name}}\r\n        </div>\r\n        <!-- 右侧按钮插槽 -->\r\n        <div slot=\"right-icon\">\r\n          <van-button round size=\"small\" @click=\"editData\">编辑资料</van-button>\r\n        </div>\r\n      </van-cell>\r\n      <!-- data数据 -->\r\n      <van-grid :border=\"false\">\r\n        <van-grid-item>\r\n          <div slot=\"text\" class=\"title\">{{currentUser.art_count}}</div>\r\n          <div slot=\"text\" class=\"text\">头条</div>\r\n        </van-grid-item>\r\n        <van-grid-item>\r\n          <div slot=\"text\" class=\"title\">{{currentUser.follow_count}}</div>\r\n          <div slot=\"text\" class=\"text\">关注</div>\r\n        </van-grid-item>\r\n        <van-grid-item>\r\n          <div slot=\"text\" class=\"title\">{{currentUser.fans_count}}</div>\r\n          <div slot=\"text\" class=\"text\">粉丝</div>\r\n        </van-grid-item>\r\n        <van-grid-item>\r\n          <div slot=\"text\" class=\"title\">{{currentUser.like_count}}</div>\r\n          <div slot=\"text\" class=\"text\">获赞</div>\r\n        </van-grid-item>\r\n      </van-grid>\r\n    </van-cell-group>\r\n    <van-cell-group v-else class=\"no-login\" :border=\"false\">\r\n      <van-cell>\r\n        <div slot=\"title\" class=\"no-login-wrapper\" @click=\"$router.push({\r\n          name: 'login',\r\n          query: {\r\n            redirect: '/mine'\r\n          }\r\n        })\">\r\n          <div>\r\n            <i class=\"iconfont toutiao-wode\"></i>\r\n          </div>\r\n          <div>登录 / 注册</div>\r\n        </div>\r\n      </van-cell>\r\n    </van-cell-group>\r\n    <van-grid class=\"saveMsg\" :column-num=\"2\" :border=\"false\">\r\n      <van-grid-item icon-prefix=\"iconfont toutiao\" icon=\"shoucang\" text=\"收藏\" />\r\n      <van-grid-item icon-prefix=\"iconfont toutiao\" icon=\"lishi\" text=\"历史\" />\r\n    </van-grid>\r\n    <van-cell title=\"小智同学\" is-link to=\"chat\" />\r\n    <van-cell v-if=\"user\"\r\n      class=\"logout\"\r\n      title=\"退出登录\"\r\n      @click=\"handleLogout\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from 'vuex'\r\nimport { userInfoApi } from '@/http/user'\r\nexport default {\r\n  name: 'mine',\r\n  data () {\r\n    return {\r\n      currentUser: {},\r\n      e: null\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState(['user'])\r\n  },\r\n  methods: {\r\n    async getCurrentUserInfo () {\r\n      const { data } = await userInfoApi()\r\n      console.log('当前用户信息', data)\r\n      this.currentUser = data.data\r\n    },\r\n    handleLogout () {\r\n      this.$dialog.confirm({\r\n        title: '退出确认',\r\n        message: '退出当前头条账号，将不能同步收藏，发布评论和云端分享等'\r\n      }).then(() => {\r\n        // on close\r\n        this.$store.commit('setUser', null)\r\n        // 点击退出登录 需要清除二级路由home页面的缓存\r\n        this.$store.commit('addHomeAcaheView', 'home')\r\n      })\r\n    },\r\n    editData () {\r\n      console.log(123)\r\n      this.$router.push({\r\n        name: 'editData'\r\n      })\r\n    }\r\n  },\r\n  created () {\r\n    if (this.user) {\r\n      this.getCurrentUserInfo()\r\n    }\r\n  }\r\n\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.mine {\r\n  .topMsg {\r\n    background: url(\"./imgs/banner@2x.png\");\r\n    background-size: cover;\r\n    .avatorMsg {\r\n      box-sizing: border-box;\r\n      height: 115px;\r\n      background-color: unset;\r\n      padding: 38px 16px 12px 16px;\r\n      .van-image  {\r\n        width: 66px;\r\n        height: 66px;\r\n        border-radius: 66px;\r\n        border: 1px solid #fff;\r\n      }\r\n      .van-cell__title {\r\n        padding-left: 11px;\r\n        font-size: 15px;\r\n        color: #fff;\r\n      }\r\n      .van-button__text {\r\n        // color: #c1c1c1;\r\n      }\r\n      .van-button {\r\n        height: 17px;\r\n        color: #666;\r\n      }\r\n    }\r\n    .van-grid{\r\n      height: 65px;\r\n      .van-grid-item {\r\n        height: 100%;\r\n        /deep/.van-grid-item__content {\r\n          background-color: unset !important;\r\n          color: #fff;\r\n          .title {\r\n            font-size: 18px;\r\n            margin-bottom: 8px;\r\n          }\r\n          .text {\r\n            font-size: 12px;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n  }\r\n  .no-login {\r\n    height: 180px;\r\n    background: url(\"./imgs/banner@2x.png\");\r\n    background-size: cover;\r\n    display: flex;\r\n    align-items: center;\r\n\r\n    .van-cell {\r\n      background: unset;\r\n\r\n      .van-cell__title {\r\n        text-align: center;\r\n        color: #fff;\r\n        font-size: 18px;\r\n        line-height: 30px;\r\n        .no-login-wrapper {\r\n          display: inline-block;\r\n          .toutiao-wode {\r\n            font-size: 30px;\r\n            color: #fff;\r\n          }\r\n        }\r\n\r\n      }\r\n    }\r\n  }\r\n  .saveMsg {\r\n    height: 70px;\r\n    margin-bottom: 5px;\r\n    .van-grid-item {\r\n      box-sizing: border-box;\r\n      height: 100%;\r\n      /deep/.van-grid-item__content {\r\n\r\n        /deep/.toutiao {\r\n          font-size: 22px;\r\n        }\r\n        .toutiao-shoucang {\r\n          color: #eb5253;\r\n        }\r\n        .toutiao-lishi {\r\n          color: #ff9d1d;\r\n        }\r\n      }\r\n\r\n    }\r\n  }\r\n  .logout {\r\n    text-align: center;\r\n    margin-top: 5px;\r\n    font-size: 15px;\r\n    color: #d86262;\r\n  }\r\n}\r\n\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=30e06d83&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=30e06d83&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"30e06d83\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/@vue/cli-service/node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=30e06d83&scoped=true&lang=scss&\"","/**\r\n * 用户相关的请求模块\r\n */\r\nimport request from '@/utils/request'\r\n\r\n/**\r\n * 登录注册\r\n */\r\nexport const hanldeLoginApi = (data) => {\r\n  return request({\r\n    method: 'POST',\r\n    url: '/app/v1_0/authorizations',\r\n    data\r\n  })\r\n}\r\n\r\n/**\r\n * 发送手机验证码\r\n */\r\nexport const handleSendMobileMessageApi = (data) => {\r\n  return request({\r\n    method: 'GET',\r\n    url: `/app/v1_0/sms/codes/${data}`\r\n  })\r\n}\r\n\r\n/**\r\n * 获取用户自己的信息\r\n */\r\n\r\nexport const userInfoApi = () => {\r\n  return request({\r\n    method: 'GET',\r\n    url: '/app/v1_0/user'\r\n  })\r\n}\r\n\r\n/**\r\n * 获取用户首页头部标签内容\r\n */\r\n\r\nexport const getUserTabsListApi = () => {\r\n  return request({\r\n    method: 'GET',\r\n    url: '/app/v1_0/user/channels'\r\n  })\r\n}\r\n\r\n/**\r\n *\r\n * 获取所有的频道\r\n */\r\n\r\nexport const getAllChannelsApi = () => {\r\n  return request({\r\n    method: 'GET',\r\n    url: '/app/v1_0/channels'\r\n  })\r\n}\r\n\r\n/**\r\n * 新增用户频道\r\n *\r\n */\r\n\r\nexport const addUserChannelApi = data => {\r\n  return request({\r\n    method: 'PATCH',\r\n    url: '/app/v1_0/user/channels',\r\n    data\r\n  })\r\n}\r\n\r\n/**\r\n * 删除指定的频道\r\n */\r\nexport const deleteUserChannelApi = data => {\r\n  return request({\r\n    method: 'DELETE',\r\n    url: `/app/v1_0/user/channels/${data}`\r\n  })\r\n}\r\n\r\n/**\r\n * 关注用户\r\n */\r\nexport const followAutorApi = data => {\r\n  return request({\r\n    method: 'POST',\r\n    url: '/app/v1_0/user/followings',\r\n    data\r\n  })\r\n}\r\n\r\n/**\r\n * 取消关注用户\r\n */\r\n\r\nexport const cancelFollowAutorApi = target => {\r\n  return request({\r\n    method: 'DELETE',\r\n    url: `/app/v1_0/user/followings/${target}`\r\n  })\r\n}\r\n\r\n/**\r\n * 获取用户个人信息\r\n */\r\nexport const getUserProfitApi = () => {\r\n  return request({\r\n    method: 'GET',\r\n    url: '/app/v1_0/user/profile'\r\n  })\r\n}\r\n"],"sourceRoot":""}