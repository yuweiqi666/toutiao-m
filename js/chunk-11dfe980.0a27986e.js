(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-11dfe980"],{"056d":function(t,e,n){},1282:function(t,e,n){"use strict";n("e8c5")},4674:function(t,e,n){"use strict";n("81ec")},"7b63":function(t,e,n){},"81ec":function(t,e,n){},8339:function(t,e,n){"use strict";n("056d")},a8e7:function(t,e,n){"use strict";n("7b63")},e8c5:function(t,e,n){},eab1:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"edit-data"},[n("van-nav-bar",{attrs:{title:"个人信息","left-arrow":""},on:{"click-left":function(e){return t.$router.back()}}}),n("van-cell",{attrs:{"is-link":""}},[n("div",{attrs:{slot:"title"},slot:"title"},[t._v(" 头像 ")]),n("div",{attrs:{slot:"default"},slot:"default"},[n("van-image",{attrs:{width:"30",height:"30",src:t.userProfit.photo,round:"",fit:"cover"}})],1)]),n("van-cell",{attrs:{"is-link":"",title:"昵称",value:t.userProfit.name},on:{click:function(e){return t.showPopup("username")}}}),n("van-cell",{attrs:{"is-link":""},on:{click:function(e){return t.showPopup("gender")}}},[n("div",{attrs:{slot:"title"},slot:"title"},[t._v(" 性别 ")]),n("div",{attrs:{slot:"default"},slot:"default"},[0==t.userProfit.gender?n("span",[t._v("男")]):1==t.userProfit.gender?n("span",[t._v("女")]):t._e()])]),n("van-cell",{attrs:{"is-link":"",title:"生日",value:t.userProfit.birthday},on:{click:function(e){return t.showPopup("birthday")}}}),n("van-popup",{ref:"vanPopup",staticClass:"bg",attrs:{id:"popupBottom",position:"bottom"},model:{value:t.popShow,callback:function(e){t.popShow=e},expression:"popShow"}},["username"==t.editItemShow?n("edit-name",{attrs:{userProfit:t.userProfit},on:{closeEditPopup:t.handleCloseEditPopup}}):"gender"==t.editItemShow?n("edit-gender",{attrs:{userProfit:t.userProfit},on:{closeEditPopup:t.handleCloseEditPopup}}):"birthday"==t.editItemShow?n("edit-birthday",{attrs:{userProfit:new Date(t.userProfit.birthday)},on:{closeEditPopup:t.handleCloseEditPopup,editBirthDay:function(e){t.userProfit.birthday=e}}}):t._e()],1)],1)},o=[],i=n("1da1"),a=(n("96cf"),n("fed0")),u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"edit-name"},[n("van-nav-bar",{attrs:{title:"昵称","left-text":"取消","right-text":"完成"},on:{"click-left":t.onClickLeft,"click-right":function(e){return t.onClickRight("name")}}}),n("van-form",{ref:"editNameForm",attrs:{"show-error-message":!1,"show-error":!1}},[n("van-field",{attrs:{rows:"2",autosize:"",type:"textarea",maxlength:"7",placeholder:"请输入昵称","show-word-limit":"",rules:[{required:!0,message:"昵称必须在1~7个字符之间"}]},model:{value:t.userProfitForm.name,callback:function(e){t.$set(t.userProfitForm,"name",e)},expression:"userProfitForm.name"}})],1)],1)},s=[],c=n("2ef0"),l={data:function(){return{userProfitForm:Object(c["cloneDeep"])(this.userProfit)}},props:["userProfit"],methods:{onClickLeft:function(){this.$emit("closeEditPopup")},onClickRight:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(n.prev=0,"name"!==t){n.next=4;break}return n.next=4,e.$refs.editNameForm.validate();case 4:e.handleEditProfit(t),n.next=11;break;case 7:n.prev=7,n.t0=n["catch"](0),console.log(n.t0),e.$toast.fail(n.t0[0].message);case 11:case"end":return n.stop()}}),n,null,[[0,7]])})))()},handleEditProfit:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,o,i,u,s,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(a["d"])({name:"name"===t?e.userProfitForm.name:null,gender:"gender"===t?e.$refs.pickerEdit.getIndexes()[0]:null,birthday:"birthday"===t?e.userProfitForm.getFullYear()+"-"+(e.userProfitForm.getMonth()+1)+"-"+e.userProfitForm.getDate():null});case 3:r=n.sent,o=r.data,i=o.data,u=i.name,s=i.gender,c=i.birthday,"name"===t?e.userProfit.name=u:"gender"===t?e.userProfit.gender=s:"birthday"===t&&(console.log("this.userProfit",e.userProfit),e.$emit("editBirthDay",c)),e.$emit("closeEditPopup"),n.next=13;break;case 10:n.prev=10,n.t0=n["catch"](0),e.$toast.fail("编辑失败");case 13:case"end":return n.stop()}}),n,null,[[0,10]])})))()},onCancel:function(){this.onClickLeft()}}},d={name:"EditName",mixins:[l]},f=d,p=(n("1282"),n("2877")),h=Object(p["a"])(f,u,s,!1,null,"576197e2",null),m=h.exports,v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"edit-gender"},[n("van-picker",{ref:"pickerEdit",attrs:{title:"性别","show-toolbar":"","confirm-button-text":"完成","default-index":t.userProfitForm.gender,"visible-item-count":"4",columns:t.columns},on:{confirm:t.onConfirm,cancel:t.onCancel}})],1)},b=[],P={name:"EditGender",mixins:[l],data:function(){return{columns:["男","女"]}},methods:{onConfirm:function(){this.onClickRight("gender")}}},g=P,w=(n("4674"),Object(p["a"])(g,v,b,!1,null,"3cf99a94",null)),k=w.exports,E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"edit-birthday"},[n("van-datetime-picker",{attrs:{"visible-item-count":"4",type:"date",title:"选择年月日"},on:{confirm:t.onConfirm,cancel:t.onCancel},model:{value:t.userProfitForm,callback:function(e){t.userProfitForm=e},expression:"userProfitForm"}})],1)},x=[],C={name:"EditBirthday",mixins:[l],data:function(){return{}},methods:{onConfirm:function(t){console.log(this.userProfitForm),console.log(t.getFullYear()),console.log(t.getMonth()+1),console.log(t.getDate()),this.onClickRight("birthday")}}},_=C,O=(n("a8e7"),Object(p["a"])(_,E,x,!1,null,"0765922f",null)),j=O.exports,y={name:"EditData",data:function(){return{popShow:!1,userProfit:{},editItemShow:"",username:""}},components:{EditName:m,EditGender:k,EditBirthday:j},methods:{showPopup:function(t){var e=this;this.editItemShow=t,this.popShow=!0,this.$nextTick((function(){var n=e.$refs.vanPopup.$el;n.style.height="username"===t?"100%":"30%"}))},handleCloseEditPopup:function(){this.popShow=!1}},created:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(a["g"])();case 2:n=e.sent,r=n.data,console.log("个人信息",r.data),t.userProfit=r.data;case 6:case"end":return e.stop()}}),e)})))()}},F=y,$=(n("8339"),Object(p["a"])(F,r,o,!1,null,"6aa5e1ae",null));e["default"]=$.exports},fed0:function(t,e,n){"use strict";n.d(e,"j",(function(){return o})),n.d(e,"i",(function(){return i})),n.d(e,"k",(function(){return a})),n.d(e,"h",(function(){return u})),n.d(e,"f",(function(){return s})),n.d(e,"a",(function(){return c})),n.d(e,"c",(function(){return l})),n.d(e,"e",(function(){return d})),n.d(e,"b",(function(){return f})),n.d(e,"g",(function(){return p})),n.d(e,"d",(function(){return h}));var r=n("b775"),o=function(t){return Object(r["a"])({method:"POST",url:"/app/v1_0/authorizations",data:t})},i=function(t){return Object(r["a"])({method:"GET",url:"/app/v1_0/sms/codes/".concat(t)})},a=function(){return Object(r["a"])({method:"GET",url:"/app/v1_0/user"})},u=function(){return Object(r["a"])({method:"GET",url:"/app/v1_0/user/channels"})},s=function(){return Object(r["a"])({method:"GET",url:"/app/v1_0/channels"})},c=function(t){return Object(r["a"])({method:"PATCH",url:"/app/v1_0/user/channels",data:t})},l=function(t){return Object(r["a"])({method:"DELETE",url:"/app/v1_0/user/channels/".concat(t)})},d=function(t){return Object(r["a"])({method:"POST",url:"/app/v1_0/user/followings",data:t})},f=function(t){return Object(r["a"])({method:"DELETE",url:"/app/v1_0/user/followings/".concat(t)})},p=function(){return Object(r["a"])({method:"GET",url:"/app/v1_0/user/profile"})},h=function(t){return Object(r["a"])({method:"PATCH",url:"/app/v1_0/user/profile",data:t})}}}]);
//# sourceMappingURL=chunk-11dfe980.0a27986e.js.map